{"version":3,"sources":["game.js"],"names":["BUG_IMG","require","CARROT_IMG","CarrotManager","$target","$carrotsCnt","maxHeight","getBoundingClientRect","height","maxWidth","width","num","textContent","i","carrot","createCarrotImg","appendChild","max","Math","random","querySelectorAll","forEach","remove","img","tagName","parseInt","innerHTML","getRandomSize","document","createElement","firstElementChild","BugManager","bug","createBugImg","init","BG_MP3","time","timeout","timeInterval","BUG_PULL","CARROT_PULL","ALERT","GAME_WIN","bgm","Audio","bugPull","carrotPull","lostAlert","winAlert","playOrStopBtn","querySelector","timerElem","carrotsCnt","gamePlayground","modal","modalGameText","bugManager","retryBtn","carrotManager","clickCarrot","target","load","play","removeByImg","stopGame","initGame","toString","padStart","dataset","currenticon","togglePlayOrStopBtn","removeAll","classList","contains","add","lostGame","pause","clearInterval","clearTimeout","addEventListener","e","switchGame","createBugsByNum","createRabbitByNum","setInterval","setTimeout","currentIcon","setAttribute"],"mappings":"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","file":"game.8822dfd0.js","sourceRoot":"..\\src","sourcesContent":["const BUG_IMG = require('/../public/img/bug.png');\r\nconst CARROT_IMG = require('/../public/img/carrot.png');\r\n\r\nclass CarrotManager {\r\n\tconstructor($target, $carrotsCnt) {\r\n\t\tthis.$target = $target;\r\n\t\tthis.maxHeight = $target.getBoundingClientRect().height;\r\n\t\tthis.maxWidth = $target.getBoundingClientRect().width;\r\n\t\tthis.$carrotsCnt = $carrotsCnt;\r\n\t}\r\n\r\n\tcreateRabbitByNum(num) {\r\n\t\tthis.$carrotsCnt.textContent = num;\r\n\r\n\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\tconst carrot = this.createCarrotImg();\r\n\t\t\tthis.$target.appendChild(carrot);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRandomSize(max) {\r\n\t\treturn Math.random() * max;\r\n\t}\r\n\r\n\tremoveAll() {\r\n\t\tconst carrots = this.$target.querySelectorAll('.carrot');\r\n\t\tcarrots.forEach((carrot) => {\r\n\t\t\tcarrot.remove();\r\n\t\t});\r\n\t}\r\n\r\n\tremoveByImg(img) {\r\n\t\tif (img.tagName === 'IMG') {\r\n\t\t\timg.remove();\r\n\t\t\tthis.$carrotsCnt.textContent = parseInt(this.$carrotsCnt.textContent) - 1;\r\n\t\t}\r\n\t}\r\n\tcreateCarrotImg() {\r\n\t\tconst innerHTML = `\r\n\t\t\t<img\r\n\t\t\t\tname=carrot\r\n\t\t\t\tclass=\"charactor carrot\"\r\n\t\t\t\tsrc=\"${CARROT_IMG}\"\r\n\t\t\t\tstyle= \"transform: translate(${this.getRandomSize(\r\n\t\t\t\t\tthis.maxWidth - 80\r\n\t\t\t\t)}px, ${this.getRandomSize(this.maxHeight - 80)}px)\"\r\n\t\t\t\talt=\"carrot\"\r\n\t\t\t/>\r\n\t\t`;\r\n\t\tconst carrot = document.createElement('div');\r\n\t\tcarrot.innerHTML = innerHTML;\r\n\t\treturn carrot.firstElementChild;\r\n\t}\r\n}\r\nclass BugManager {\r\n\tconstructor($target) {\r\n\t\tthis.$target = $target;\r\n\t\tthis.maxHeight = $target.getBoundingClientRect().height;\r\n\t\tthis.maxWidth = $target.getBoundingClientRect().width;\r\n\t}\r\n\r\n\tcreateBugsByNum(num) {\r\n\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\tconst bug = this.createBugImg();\r\n\t\t\tthis.$target.appendChild(bug);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRandomSize(max) {\r\n\t\treturn Math.random() * max;\r\n\t}\r\n\r\n\tremoveAll() {\r\n\t\tconst bugs = this.$target.querySelectorAll('.bug');\r\n\t\tbugs.forEach((bug) => {\r\n\t\t\tbug.remove();\r\n\t\t});\r\n\t}\r\n\r\n\tcreateBugImg() {\r\n\t\tconst innerHTML = `\r\n\t\t\t<img\r\n\t\t\t\tname=bug\r\n\t\t\t\tclass=\"charactor bug\"\r\n\t\t\t\tsrc=\"${BUG_IMG}\"\r\n\t\t\t\tstyle=\"transform:translate(${this.getRandomSize(\r\n\t\t\t\t\tthis.maxWidth - 50\r\n\t\t\t\t)}px, ${this.getRandomSize(this.maxHeight - 50)}px);\"\r\n\t\t\t\talt=\"bug\"\r\n\t\t\t/>\r\n\t\t`;\r\n\t\tconst bug = document.createElement('div');\r\n\t\tbug.innerHTML = innerHTML;\r\n\t\treturn bug.firstElementChild;\r\n\t}\r\n}\r\n\r\nfunction init() {\r\n\tconst BG_MP3 = require('/../public/sound/bg.mp3');\r\n\tconst BUG_PULL = require('/../public/sound/bug_pull.mp3');\r\n\tconst CARROT_PULL = require('/../public/sound/carrot_pull.mp3');\r\n\tconst ALERT = require('/../public/sound/alert.wav');\r\n\tconst GAME_WIN = require('/../public/sound/game_win.mp3');\r\n\t// audios\r\n\tconst bgm = new Audio(BG_MP3);\r\n\tconst bugPull = new Audio(BUG_PULL);\r\n\tconst carrotPull = new Audio(CARROT_PULL);\r\n\tconst lostAlert = new Audio(ALERT);\r\n\tconst winAlert = new Audio(GAME_WIN);\r\n\r\n\t// elems\r\n\tconst playOrStopBtn = document.querySelector('.game__top__play-or-stop-btn');\r\n\tconst timerElem = document.querySelector('.game__top__timer__item');\r\n\tconst carrotsCnt = document.querySelector('.game__top__carrots-count__item');\r\n\tconst gamePlayground = document.querySelector('.game__playground');\r\n\tconst modal = document.querySelector('.modal');\r\n\tconst modalGameText = document.querySelector('.modal__game__text');\r\n\tconst bugManager = new BugManager(gamePlayground);\r\n\tconst retryBtn = document.querySelector('.retry');\r\n\tconst carrotManager = new CarrotManager(gamePlayground, carrotsCnt);\r\n\tlet time;\r\n\tlet timeout;\r\n\tlet timeInterval;\r\n\r\n\tconst clickBug = () => {\r\n\t\tlostGame();\r\n\t\tbugPull.load();\r\n\t\tbugPull.play();\r\n\t};\r\n\tconst clickCarrot = (target) => {\r\n\t\tcarrotPull.load();\r\n\t\tcarrotPull.play();\r\n\t\tcarrotManager.removeByImg(target);\r\n\t\tif (carrotsCnt.innerHTML === '0') {\r\n\t\t\twinGame();\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tconst target = e.target;\r\n\t\tif (target.tagName !== 'IMG') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (target.classList.contains('bug')) {\r\n\t\t\tclickBug();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (target.classList.contains('carrot')) {\r\n\t\t\tclickCarrot(target);\r\n\t\t}\r\n\t};\r\n\tgamePlayground.addEventListener('click', handleClick);\r\n\tfunction initGame() {\r\n\t\t// 시간 원상태\r\n\t\ttime = 10;\r\n\t\ttimerElem.textContent = `00:${time.toString().padStart(2, '0')}`;\r\n\r\n\t\t// 당근 벌래 원상태\r\n\t\tcarrotsCnt.textContent = 0;\r\n\t\t// 버튼 원상태\r\n\t\tconst currentIcon = playOrStopBtn.dataset.currenticon;\r\n\r\n\t\tif (currentIcon !== 'play') {\r\n\t\t\ttogglePlayOrStopBtn();\r\n\t\t}\r\n\r\n\t\tbugManager.removeAll();\r\n\t\tcarrotManager.removeAll();\r\n\t\t// 모달 원상태\r\n\t\tif (!modal.classList.contains('hidden')) {\r\n\t\t\tmodal.classList.add('hidden');\r\n\t\t}\r\n\t}\r\n\tinitGame();\r\n\r\n\tfunction winGame() {\r\n\t\tmodalGameText.textContent = 'YOU WON!!';\r\n\t\tstopGame();\r\n\t\twinAlert.load();\r\n\t\twinAlert.play();\r\n\t}\r\n\r\n\tfunction lostGame() {\r\n\t\tmodalGameText.textContent = 'YOU LOST';\r\n\t\tstopGame();\r\n\t\tlostAlert.load();\r\n\t\tlostAlert.play();\r\n\t}\r\n\r\n\tfunction stopGame() {\r\n\t\ttogglePlayOrStopBtn();\r\n\t\tbgm.pause();\r\n\t\tif (modal.classList.contains('hidden')) {\r\n\t\t\tmodal.classList.remove('hidden');\r\n\t\t}\r\n\t\tif (timeout) {\r\n\t\t\tclearInterval(timeInterval);\r\n\t\t\tclearTimeout(timeout);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction gameStart() {\r\n\t\tbgm.load();\r\n\t\tbgm.play();\r\n\t\ttogglePlayOrStopBtn();\r\n\t\tbugManager.createBugsByNum(15);\r\n\t\tcarrotManager.createRabbitByNum(10);\r\n\t\ttimeInterval = setInterval(() => {\r\n\t\t\ttime--;\r\n\t\t\ttimerElem.textContent = `00:${time.toString().padStart(2, '0')}`;\r\n\t\t}, 1000);\r\n\t\ttimeout = setTimeout(lostGame, 10000);\r\n\t}\r\n\tfunction getCurrentIcon() {\r\n\t\treturn playOrStopBtn.dataset.currenticon;\r\n\t}\r\n\tconst switchGame = () => {\r\n\t\tconst currentIcon = getCurrentIcon();\r\n\t\tif (currentIcon === 'play') {\r\n\t\t\tinitGame();\r\n\t\t\tgameStart();\r\n\t\t} else {\r\n\t\t\tlostGame();\r\n\t\t}\r\n\t};\r\n\tretryBtn.addEventListener('click', switchGame);\r\n\tplayOrStopBtn.addEventListener('click', switchGame);\r\n\r\n\tfunction togglePlayOrStopBtn() {\r\n\t\tconst currentIcon = playOrStopBtn.dataset.currenticon;\r\n\r\n\t\tplayOrStopBtn.setAttribute(\r\n\t\t\t'data-currenticon',\r\n\t\t\tcurrentIcon === 'play' ? 'stop' : 'play'\r\n\t\t);\r\n\t\tplayOrStopBtn.innerHTML =\r\n\t\t\tcurrentIcon === 'play'\r\n\t\t\t\t? '<i class=\"fas fa-square\"></i>'\r\n\t\t\t\t: '<i class=\"fas fa-play\"></i>';\r\n\t}\r\n}\r\n\r\ninit();\r\n"]}